{% extends "base.html" %}
{% block title %}{{ result.songTitle }} ⋅ the Right Rhymes ⋅ Hip-Hop Slang Defined{% endblock %}

{% block search_navigation %}
{% include "ui/_search.html" %}
{% endblock %}


{% block content %}
<div class="container song">
    <a href="{{result.lyrics_url}}" target="_blank" style="float: right"><img src="{{ url_for('static', filename='img/genius.png') }}" height="35" width="35"/></a>
    <div class="h1">
        {% for artist in result.primary_artists %}
        {{ artist.name.replace('&', '&amp;') }}
        {% endfor %}
        - "{{ result.name }}"
    </div>
    <div class="container h5">
      <div class="tag">&lt;example <span class="attribute">id="{{result.id}}"</span>&gt;</div>
        <div class="indentTag">
            <span class="tag">&lt;date&gt;</span>{{ result.album.release_date }}<span class="tag">&lt;/date&gt;</span>
        </div>
        <div class="indentTag">
            {% for artist in result.primary_artists %}
            <span class="tag">&lt;artist&gt;</span>{{ artist.name.replace('&', '&amp;') }}<span class="tag">&lt;/artist&gt;</span>
            {% endfor %}
        </div>
        <div class="indentTag">
            <span class="tag">&lt;songTitle&gt;</span>{{ result.name.replace('&', '&amp;') }}<span class="tag">&lt;/songTitle&gt;</span>
        </div>
        {% for f in result.featured_artists %}
            <div class="indentTag">
                <span class="tag">&lt;feat&gt;</span>{{ f.name }}<span class="tag">&lt;/feat&gt;</span>
            </div>
        {% endfor %}
        <div class="indentTag">
            <span class="tag">&lt;album&gt;</span>{{ result.album.name.replace('&', '&amp;') }}<span class="tag">&lt;/album&gt;</span>
        </div>
        <div class="indentTag">
            <span class="tag">&lt;lyric&gt;</span><span class="tag">&lt;/lyric&gt;</span>
        </div>
        <span class="tag">&lt;/example&gt;</span>
    </div>
    <a class="btn btn-default" href="{{ url_for('ui.edit_song', song_id=result.id) }}">Edit</a>
    <div class="h5 container">
        {% for lyric in result.lyrics.split("\n") %}
            {% if q %}
                <div class="h5">{{ lyric|replace(q, "<span class='query'>" + q + "</span>")|safe }}</div>
            {% else %}
                <div class="h5">{{ lyric }}</div>
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function verifyDate(songId) {
    $.post('/' + songId + '/verifyDate')
    .done(function() {
        $("#verify_" + songId).hide();
        console.log("Successfully verified " + songId);
    }).fail(function() {
        console.log("Failed to verify " + songId);
    });
}
</script>
{% endblock %}