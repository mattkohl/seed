from unittest import TestCase


from src.dbp.utils import DbpUtils


class TestDbpUtils(TestCase):

    def setUp(self) -> None:
        self.annotated = """
        <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML+RDFa 1.0//EN\" \"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:lexvo=\"http://lexvo.org/ontology#\" xmlns:dbpedia=\"http://dbpedia.org/resource/\" xmlns:dbpo=\"http://dbpedia.org/ontology/\">\n<head>\n<title>DBpedia Spotlight annotation</title>\n</head>\n<body>\n<div>\n<br/><br/>[Chorus: M.I.A.]<br/>Check my coat in and I paid the dollar<br/>Sidekick rings - \"What's up? Holla!\"<br/>Text the address - 'I'll see you later!'<br/>Baby, come down!<br/>Come down, come down, come down<br/>Run down, run down, run down<br/>Run, make a run, make a run, make a run<br/>Make a run, make a run, make a run down<br/>A dun da da dun da da dun da da dun da da dun dun<br/>Dun da da dun da da dun dun<br/>Beat goes on<br/>A dun da da dun da da dun, dun da da dun da da dun dun<br/>Dun da da dun da da dun dun<br/>Beat goes on<br/><br/>[Verse 1: M.I.A.]<br/>In a faraway land, we got shit made<br/><a about=\"http://dbpedia.org/resource/Ray-Ban\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Ray-Ban\" title=\"http://dbpedia.org/resource/Ray-Ban\">Ray-Ban</a> shades, warheads laid<br/>Babies born in air raids<br/>My girls run <a about=\"http://dbpedia.org/resource/Everglades\" typeof=\"http://dbpedia.org/ontology/Location\" href=\"http://dbpedia.org/resource/Everglades\" title=\"http://dbpedia.org/resource/Everglades\">The Everglades</a><br/>Indian tribesmen, gamble spades<br/>Indian chicks, they get men laid<br/>Milk and honey, smoke high-grade<br/>Gold and diamond, gems and jade<br/>Ride on on our tanks â€“ invade!<br/>Blow up things to save our name<br/>Mina, <a about=\"http://dbpedia.org/resource/Rina_Lazarus\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Rina_Lazarus\" title=\"http://dbpedia.org/resource/Rina_Lazarus\">Rina</a>, <a about=\"http://dbpedia.org/resource/Tina_Turner\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Tina_Turner\" title=\"http://dbpedia.org/resource/Tina_Turner\">Tina</a>, <a about=\"http://dbpedia.org/resource/Sabrina_Salerno\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Sabrina_Salerno\" title=\"http://dbpedia.org/resource/Sabrina_Salerno\">Sabrina</a><br/>Being a super-Indian babe<br/>We black market, we black made<br/>We hit shit out when it rains<br/>Would you come down and catch my train?<br/>Would you run down and play this game?<br/><br/>[Chorus: M.I.A.]<br/>Check my coat in and I paid the dollar<br/>Sidekick rings - \"What's up? Holla!\"<br/>Text the address - 'I'll see you later!'<br/>Baby, come down!<br/>Come down, come down, come down<br/>Run down, run down, run down<br/>Run, make a run, make a run, make a run<br/>Make a run, make a run, make a run down<br/>A dun da da dun da da dun da da dun da da dun dun<br/>Dun da da dun da da dun dun<br/>Beat goes on<br/>A dun da da dun da da dun, dun da da dun da da dun dun<br/>Dun da da dun da da dun dun<br/>Beat goes on<br/><br/>[Verse 2: <a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a>]<br/>Hey, hey!<br/>Baby girl, you and me, need to go to your teepee<br/>The moon is full, and I'm shining<br/>Baby, I know you see me<br/>Put a hump or two on your back, just like that<br/>Ooh, girl you're on fire<br/>I don't wanna be in love wit cha<br/>I'mma just break you off and say goodbye<br/>The night is young, don't make me wait<br/>You just might miss your chance<br/>I'm gonna tell you the truth<br/><a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a>, I'm the motherfuckin' man<br/>Today's the day - girl, let me get that<br/>Don't get mad - in fact, let me hit that<br/>I've been overkillin' them - I break backs<br/>Come down, run down - girl, where your place at?<br/><br/>[Chorus: M.I.A.]<br/>Check my coat in and I paid the dollar<br/>Sidekick rings - \"What's up? Holla!\"<br/>Text the address - 'I'll see you later!'<br/>Baby, come down!<br/>Come down, come down, come down<br/>Run down, run down, run down<br/>Run, make a run, make a run, make a run<br/>Make a run, make a run, make a run down<br/>A dun da da dun da da dun da da dun da da dun dun<br/>Dun da da dun da da dun dun<br/>Beat goes on<br/>A dun da da dun da da dun, dun da da dun da da dun dun<br/>Dun da da dun da da dun dun<br/>Beat goes on<br/><br/>[<a about=\"http://dbpedia.org/resource/Jamie_Cullum\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Jamie_Cullum\" title=\"http://dbpedia.org/resource/Jamie_Cullum\">Interlude</a>: <a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a>]<br/>Break! Ha! Ha!<br/>Hands up in the air one time!<br/>And bounce, bounce, bounce<br/>Let me tell you somethin'<br/><br/>[Outro: <a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a>]<br/>Don't get it twisted, baby girl<br/>Baby boy, cause <a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a> ain't dead<br/>Don't get it twisted, baby girl<br/>Baby boy, cause <a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a> ain't dead<br/>Don't get it twisted, baby girl<br/>Baby boy, cause <a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a> ain't dead<br/>Don't get it twisted, baby girl<br/>Baby boy, cause <a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a> ain't dead<br/>Yeah, yeah, yeah, yeah<br/>Bounce, cause <a about=\"http://dbpedia.org/resource/Timbaland\" typeof=\"http://dbpedia.org/ontology/Agent\" href=\"http://dbpedia.org/resource/Timbaland\" title=\"http://dbpedia.org/resource/Timbaland\">Timbaland</a> ain't dead!<br/><br/>\n</div>\n</body>\n</html>
        """

    def test_strip_html(self):
        result = DbpUtils.strip_html(self.annotated)
        self.assertFalse("html" in result)
